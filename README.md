# DNA

## ЭТАП 1 — Параметры и контракт ответа
Версия спецификации: v1.1 • Сводный конспект по этапам • Сгенерировано: 2025-09-29 08:45

**Цель этапа:** зафиксировать параметры запуска и формат выдачи кода. После этого этапа всегда понятно, ЧТО и в КАКОМ ВИДЕ генерировать.

### Что делаем на этом этапе
- **Назначение и область применения.** Схемы по ДНК/РНК/белкам на один лист A4, офлайн, без внешних зависимостей. Не-цели: 3D, публикационная вёрстка, статистическое моделирование.
- **Обязательные параметры.** `LANG` (HTML/React/VanillaJS/WebComponents/Canvas/Python/Java) и `TOPIC` (свободный текст, например «Transcription initiation (Pol II, +1 TSS)»).
- **Опциональные параметры (с дефолтами).** `UI_LANG` (ru), `LEVEL` (basic/standard/advanced), `ORG` (eukaryote|prokaryote|virus), `VIEW` (process|structure|pathway|timeline), `THEME` (light/dark/print), `EXPORTS` (svg,png,pdf), `LAYOUT` (A4-landscape/portrait), `SCALE`, `GRID`, `INTERACTIVE` (on/off).
- **Формат задания.** Либо полная строка с парами ключ:значение (порядок неважен), либо короткая форма «LANG | TOPIC». При отсутствии обязательного параметра допускается один короткий уточняющий вопрос.
- **Контракт ответа.** Вернуть ровно один локально работающий файл выбранного языка (без зависимостей), строго «код-без-пояснений». Ошибки линтера/рантайма недопустимы.
- **Метаданные файла.** Spec-Version, Generated-At, LANG, TOPIC, ORG, LEVEL/VIEW/THEME/EXPORTS/LAYOUT/INTERACTIVE, Checksum (опц.).

### Чек-лист перед переходом к следующему этапу
- Сформулировать `TOPIC` и выбрать `LANG`.
- Расписать (или принять по умолчанию) опциональные параметры.
- Подготовить строку параметров (полную или короткую).
- Зафиксировать формат ответа: один файл кода, без пояснений.

> Примечание: это «конспект-путеводитель». Полная спецификация v1.1 остаётся источником истины; здесь сохранены все ключевые пункты как последовательные шаги.

## ЭТАП 2 — Модель данных и визуальная грамматика A4
Версия спецификации: v1.1 • Сводный конспект по этапам • Сгенерировано: 2025-09-29 08:45

**Цель этапа:** согласовать, какие сущности и связи есть, и как они выглядят на листе A4.

### Что делаем на этом этапе
- **Модель:** описываем узлы `{id,x,y,w,h,label,type,…}` и рёбра `{id,from,to,label,kind,style?,router}`. Готовим расширенную JSON‑схему версии 1.1 для импорта/экспорта.
- **Типы узлов (биология):** DNA, RNA, Protein/Enzyme, Promoter/Enhancer/Silencer/Insulator, Gene/Exon/Intron/UTR5/UTR3, TSS(+1), TATA, PolyA, Ribosome, tRNA, TF(…)/Pol II/Mediator/CTD, Spliceosome и другие вспомогательные элементы.
- **Типы рёбер:** потоки (replicates/transcribes/…) и регуляции (activates/represses/binds/…). Учитываем геометрию `orthogonal|bezier|straight` и опциональные роутеры/маркеры.
- **Визуальные правила:** поля 12–15 мм; кегль ≥12–13px; цветовая палитра по ролям (ДНК — синий, РНК — зелёный, белки — оранжевый, регуляция — фиолетовый); метки 5′→3′ и «+1» у TSS; унифицированные маркеры стрелок; легенда справа с блоками «Роли/Процесс/Правила/Риски».
- **VIEW‑режимы:** `process`, `structure`, `pathway`, `timeline`; выбор задаёт компоновку слоёв/оси и типовые отношения.

### Чек-лист перед переходом к следующему этапу
- Сверить набор узлов/рёбер и их типы под выбранный `TOPIC`.
- Выбрать `VIEW` и тему `THEME` (light/dark/print).
- Проверить читаемость: шрифты, контраст, маркеры, легенда.
